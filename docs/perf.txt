Performance:
  1) inline functions
  2) reuse objects (vectors)
  3) remove shared_ptr
